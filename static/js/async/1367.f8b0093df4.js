"use strict";(self.rspackChunkwhk=self.rspackChunkwhk||[]).push([["1367"],{4682(e,n,s){s.r(n),s.d(n,{default:()=>c});var i=s(4848),r=s(8453),a=s(2708);function l(e){let n={a:"a",code:"code",h1:"h1",p:"p",pre:"pre",span:"span",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.h1,{id:"_1",children:[(0,i.jsx)(n.a,{className:"rp-header-anchor","aria-hidden":"true",href:"#_1",children:"#"}),"语法扩展"]}),"\n",(0,i.jsx)(a.A,{defaultLocale:"zh-CN"}),"\n",(0,i.jsx)(n.p,{children:'```python exec="1" session="filetree" from fnmatch import fnmatch from pathlib import Path'}),"\n",(0,i.jsx)(n.p,{children:'exclude = {"dist", "site", "dest", "node_modules", ".cache", "cache", ".agent", ".git"} no_recurse = {".venv*", ".github"}'}),"\n",(0,i.jsx)(n.p,{children:"def exptree(path: str, session: str) -> None: # List files and directories separately. files = [] dirs = [] for node in Path(path).iterdir(): if any(fnmatch(node.name, pattern) for pattern in exclude): continue if node.is_dir(): dirs.append(node) else: files.append(node)"}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"text",lineNumbers:!0,children:(0,i.jsxs)(n.code,{children:[(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"# Print directories first, then files (both sorted)."})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"recurse = []"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'print("```tree")'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"for directory in sorted(dirs):"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"    if any(fnmatch(directory.name, pattern) for pattern in no_recurse):"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'        print(f"{directory.name}/")'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"    else:"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"        recurse.append(directory.name)"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"        # Add code annotation at the end."})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'        print(f"{directory.name}/ # ({len(recurse)})!")'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"for file in sorted(files):"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"    print(file.name)"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'print("```\\n")'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"# Print contents of each annotated directory."})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"for index, directory in enumerate(recurse, 1):"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'    new_path = f"{path}/{directory}"'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'    print(f"{index}. \\n")'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:"    # The recursive part!"})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'    print(f\'    ```python exec="1" session="{session}"\')'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'    print(f\'    exptree("{new_path}", "{session}")\')'})}),"\n",(0,i.jsx)(n.span,{className:"line",children:(0,i.jsx)(n.span,{children:'    print("    ```\\n")'})})]})})}),"\n",(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(n.pre,{className:"shiki css-variables",style:{backgroundColor:"var(--shiki-background)",color:"var(--shiki-foreground)"},tabIndex:"0",lang:"python",lineNumbers:!0,children:(0,i.jsxs)(n.code,{children:[(0,i.jsx)(n.span,{className:"line"}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"```python "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"exec"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:"="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"1"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-foreground)"},children:" session="}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"filetree"'})]}),"\n",(0,i.jsxs)(n.span,{className:"line",children:[(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-function)"},children:"exptree"}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:"("}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"."'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:", "}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-string-expression)"},children:'"filetree"'}),(0,i.jsx)(n.span,{style:{color:"var(--shiki-token-punctuation)"},children:")"})]})]})})})]})}function c(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}c.__RSPRESS_PAGE_META={},c.__RSPRESS_PAGE_META["home%2Fpymdownx%2Findex.md"]={toc:[],title:"语法扩展",headingTitle:"语法扩展",frontmatter:{}}},2708(e,n,s){s.d(n,{A:()=>h});var i=s(4848),r=s(6540),a=s(7761),l=s(9077),c=s(4421);s(731);let t={"zh-CN":e=>`预计阅读时间: ${e.minutes>=1?`${Math.ceil(e.minutes)} 分钟`:"小于 1 分钟"}`,"en-US":e=>`Estimated reading time: ${e.minutes>=1?`${Math.ceil(e.minutes)} minutes`:"less than 1 minute"}`};function d(e,n,s){let i=Object.keys(t).includes(n)?n:s;return t[i](e)}let h=e=>{let{defaultLocale:n="en-US"}=e,s=(0,a.B)().page.readingTimeData,t=(0,l.u)(),h=(0,c.C)(),[o,p]=(0,r.useState)(d(s,t,n));return(0,r.useEffect)(()=>{p(d(s,t,n))},[t,s]),(0,i.jsx)("span",{"data-dark":String(h),className:"rp-reading-time",children:o})}}}]);